#!/usr/bin/env php
<?php
/**
 * CLI tool to test the Companion API
 */

// composer auto loader
require __DIR__ . '/../vendor/autoload.php';

use Companion\CompanionApi;

$option = isset($argv[1]) ? trim($argv[1]) : false;
$arg1   = isset($argv[2]) ? trim($argv[2]) : false;

// do something
$api = new CompanionApi('character_2');

/**
 * The order of this is important:
 * 1) Login
 * 2) get a list of characters (unsure if character id changes)
 * 3) login with a character, this returns your DC region
 * 4) Get current active character
 * 5) Get region, think to confirm?
 * 6) Get info, eg prices
 */

// request login url
#$api->oAuth()->login('[user]', '[pass]');

// Get a list of characters
#print_r( $api->login()->characters() );

// Login with a character, this should return the region
#print_r( $api->login()->characters('96a2598597454ad1_99638') );

// Get current logged in character
print_r( $api->login()->getCharacter() );
sleep(1);

// not sure ...
print_r( $api->login()->getRegion() );
sleep(1);

// Get item prices for item id 5 (Earth Shard)
print_r( $api->market()->getItemMarketListings(5) );

die;
